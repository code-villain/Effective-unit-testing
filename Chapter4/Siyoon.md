# Chapter4 가독성

- 테스트 코드는 읽기 쉬워야 한다.
    - 테스트를 읽은 프로그래머는 코드가 해야할 일을 이해할 수 있어야 한다. 또한, 테스트를 실행한 후에는 코드가 실제로 한 일이 무엇인지 말할 수 있어야 한다.
        - 이 모든건 유지보수성 향상에 기여하기 때문이다.
        - 유지보수성이 좋아야 하는 이유 (객사오 182쪽)
            > "미래에 대비하는 가장 좋은 방법은 변경을 예측하는 것이 아니라 변경을 수용할 수 있는 선택의 여지를 설계에 마련해 놓는 것이다. ... (중략) ... 언젠가는 변경이 발생할 것이며 아직까지는 그것이 무엇인지 모른다는 사실을 겸허하게 받아들인다."

## 가독성을 구리게 만드는 구린 냄새들
### 1. 기본타입 단언
- 단언 시에 의도를 알 수 없는 단어나 숫자를 사용하는 경우 (= 추상화 수준이 너무 낮은 경우)
- 개선 방법 : 추상화 수준을 적절하게 올린다.

### 2. 광역 단언
- 너무 많은 검증 범위로 인하여 무엇을 정확히 검사하려는지 알 수 없는 경우. 사소한 변경도 예상과 다른 결과를 만들게 되어 버린다.
- 개선 방법 : 본질과 관련 없는 세부 내용을 테스트에서 제거한다.
> 테스트가 실패하는 이유는 오직 하나뿐이어야 한다.

### 3. 비트 단언
- 비트 연산자로 인하여 테스트의 의도를 알 수 없는 경우 
    - 기본타입 선언과 유사하네
- 개선 방법 : 비트연산자를 부울 연산자로 교체한다. (+ 설명글도 달어 주면 좋다.)

### 4. 부차적 상세 정보
- 테스크 코드에 부수적인 정보가 너무 많은 경우
    - 광역 단언과 유사하네
- 개선 방법 :
    1. 핵심이 아닌 설정은 메서드로 추출하라. (private메서드나 setUp메서드로)
    2. 적절한 인자와 서술형 이름을 사용하라.
    3. 한 메서드 안에서는 모두 같은 수준으로 추상화하라.
    
### 5. 다중 인격
> 하나의 테스트는 오직 한가미나 똑바로 검사해야 한다.
- 연관 없이 많은 것을 단언하고 있는 경우 (103쪽 주석에 보면 단언문을 하나만 쓰라는 말이 아니다.)
    - 광역단언, 부차적 상세정보와 유사하네
- 개선 방법 : 각자의 테스트로 분리한다. (분리 단위가 클래스가 될 수 도 있고, 메서드가 될 수도 있다.)

### 6. 쪼개진 논리
- 지나친 분리로 인하여 테스트 코드의 흐름을 파악하기 위해서 흩어진 코드들을 분석해야 하는 경우
- 개선 방법 : (114쪽 하단) 사용하는 테슨트 메서드 안에 함께 두는 방법을 찾아보는 게 바람직하다. 여의치 않다면 같은 클래스 안에라도 넣어두자. 쪼개진 논리를 수용하는 건 최후의 보루여야 하낟.

### 7. 매직 넘버
- 리터럴 쓰지마
- 상수표현 말고도, 메서드로 표현하면 다양한 숫자를 담을 수 있네
```
    roll(pins(10), times(12));

    private int pins(int n) { return n;}
    private int times(int n) { return n;}
``` 
- 기본 타입 단언, 비트 단언이랑 유사하네

### 8. 셋업 설교
- 셋업에 지나치게 많은 준비작업을 하는 경우
- 개선 방법 : 부차적 상세정보와 같은 방법을 사용한다.
    - 광역단언, 부차적 상세정보, 다중 인격과 유사하네.
    
### 9. 과잉보호 테스트
- 실패에 대한 강박감에 사로잡혀서 필요하지 않은 경우까지 과잉보호하는 경우
- 개선 방법 : 불필요한 단언문을 지워버리자. 
    - 광역단언, 부차적 상세정보, 다중 인격 셋업 설교와 유사

