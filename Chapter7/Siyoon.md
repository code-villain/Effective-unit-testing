# Chapter7 테스트 가능 설계

- 테스트 가능 설계의 가장 큰 의의는 **코드를 더 잘 테스트할 수 있도록 해준다는 것**이다.
- 테스트 가능 설계는 (코드를 더 잘 테스트할 수 있다는 것은) 테스트 코드에서 클래스를 생성하고, 구현 일부를 대체하고, 다른 시나리오를 시뮬레이션하고, 원하는 실행 경로는 선택하는 드으이 작업을 쉽게 할 수 있도록 해준다.

## 테스트 가능 설계를 지향하는 방법
### 1. 결합도를 낮추고, 응집도를 올린다.
- 모듈화
- SOLID

### 2. 테스트 불가 원인을 제거한다.
#### 테스트 불가 원인 5가지
1. 클래스 생성불가
    - 객체 생성시에 사용하는 협력 객체를 넘길 수 없거나, 접근제어자가 너무 보수적인 경우
    
2. 메소드 호출 불가
    - 접근제어자가 너무 보수적인 경우
        - public하지 않은 메서드를 테스트 하고 싶다는건 잘못된 설계를 나타내고 있을지도 모른다.
        
3. 결과 확인 불가
    - 반환값이 void거나 다른 협력 객체와 상호작용하는 메서드인 경우

4. 협력 객체 대체 불가
    - 객체를 생성하는 로직이 제품코드에 하도크딩 되어 있는 경우

5. 메서드 오버라이드 불가
    - (의미없거나 과도한) final, static, private 키워드 사용
    

---

# 키워드 정리

## Siyoon

> 192 순환복잡도?

> 196 제품설계가 뭐가 리팩토링 된거지 테스트 코드만 바뀐거 같은데

> 214 맨위 맵이 무엇을 담아야 할지가 직관적이지 않다는 게 무슨 말일까요

> 224 서비스 호출이 무슨말이지

> 227 유튜브는 무슨 말이죠?

A) Gumin : p.227 마지막 문단에 생뚱맞은 '유튜브 비디오'는!
           마지막 문단의 앞 문단에 아래 내용이 있는데 번역에서 빠트렸나보네요.
           
           And there’s more! The internet is chock full of good information related to test- able design. My favorites are probably the Google Tech Talk videos. If you have some time to spare, go to youtube.com and search for “The Clean Code Talks.” A lot of good stuff there!
           
           https://www.youtube.com/watch?v=4F72VULWFvc
           이 영상입니다. 책 7.3.7에 나오는 “상속의 용도는 다형성이지 코드 재사용이 아니다...” 이 얘기 한 사람이네요


## Gumin

> 7.2.3 "협력 객체가 테스트할 메서드 안에 꽁꽁 묶여 있어서 테스트 더블로 대체하지 못할 때"란 구체적으로 어떤 경우일까요?
  7.2.4의 "협력 객체를 생성하는 로직이 제품 코드에 하드코딩 되어 있는 경우"를 의미하는 걸까요?
>7.2.4 "협력 객체를 생성하는 로직이 제품 코드에 하드코딩 되어 있는 경우"
 => 테스트하고자 하는 메서드 안에서 협력 객체를 하드코딩 된 값으로 생성하다 보니, 그 메서드의 테스트를 작성할 때 협력 객체의 더블을 만들 수 없다. 라는 뜻인가요?

A) 네 협력객체를 사용하는 방법이 '1. 직접 생성한다. 2. 외부에서 주입받는다' 이 2가지 방법만 있다고 생각할때, 직접생성하게 되어 협력객체를 주입해 줄 수 없는 경우를 말하는 거 같수다.

## Jisun

> 컴포지션이 뭐임?

A) Composition : 구성요소들, 구성 // 코드 재사용을 위해서 (재사용할) 객체를 의존하는 것을 말합니다.

> 서비스 호출을 피하라는게 객체 생성하는 과정을 클래스로 숨기지 말고 생성자를 통해 드러내라는 건가?

A) 그런뜻 같은데 '서비스 호출'이라는 말이 뭔지 감이 잘 안오네여

## Jaehee

> 198 
  테스트 각각이 자신에게 필요한 플랫폼을 직접 생성할 방법을 찾아보기 바란다. 
  > 무슨 뜻인지 잘 모르겠다

A) 코드 6-13 처럼 테스트가 필요한 플랫폼(Mac, Window..)을 직접 만들는걸 말한는 거 같네요.





