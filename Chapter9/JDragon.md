# 09 테스트 속도 개선

테스트 속도 개선이란 테스트를 빠르게 해줄 실마리를 찾기 위해 코드를 파헤치는 작업

## 9.1 속도 개선을 위해서

### 9.1.1 더 빠르게!

개발자는 빌드를 걸어놓고 다른 작업을 시작해야 하는데, 테스트 속도가 느리면 멍~하니 기다려야 한다

### 9.1.2 상황 속으로

성능문제를 겪게 되면 프로파일러의 도움을 구해 병목지점을 찾고 성능 저하의 원인을 파악할 것이다

느린 테스트와 느린 빌드에 대한 접근 방식

- 무엇이 문제라고 미리부터 가정하지 말고 테스트가 어떻게 실행되는지 분석하여 정확한 상황 데이터를 구해야 한다

### 9.1.3 빌드 프로파일링하기

빌드를 느리게 하는 가장 큰 원인은 거~의 언제나 테스트다

메이븐 빌드 프로파일링하기

- 메이븐의 기본 기능만으로는 빌드 단계별 수행 시간을 측정할 수 없다.
- maven-build-utils 익스텐선을 추가해준다
- <build> 와 <properties>, <profiles> 를 추가해준다
- 메이븐에 -P 파라미터로 perfstats 프로파일을 활성화하고 빌드를 하면 된다
- 한 단계가 차지하는 비율, 시간을 구할 수 있다

### 9.1.4 테스트 프로파일링하기

최적화 대상을 테스트로 정했다면 현재 병목구간을 파악해야 한다

메이븐 보고서 생성기 : maven-surefile-plugin 을 사용하면 된다

성능 개선 기법

- 테스트 코드를 최적화하는 묘책과 검토사항
- 빌드 스크립트를 개선해서 추가적인 속도를 이끌어내는 방법

## 9.2 테스트 코드 속도 높이기

테스트 코드 속도 개선의 핵심 전략은 느린 부분을 찾아내어 더 빠르게 만들거나 아예 실행시키지 않는 것

### 9.2.1 피곤하지 않다면 잠들지 말라

테스트를 멈춰있게 하지마라

### 9.2.2 덩치 큰 기반 클래스를 경계하라

- 기반 클래스는 보통 공통의 셋업, 티어다운 메서드, 유틸리티 메서드를 제공한다. 테스트 작성자에겐 편하지만 대가를 치러야 한다. 하위 클래스의 모든 테스트가 이런 유틸 기능을 전부 사용하는 경우가 거의 없다. 쓸데없이 반복 수행되는 요소를 제거하라
- 다른 클래스를 상속하면 그 클래스의 셋업과 티어다운을 매번 실행한다. 쓸데없는 계층을 없애라
- 상속을 코드 재사용의 목적으로 사용하지 말라는 말과 일맥상통?하는건가??
-